import{v as M,b as P,A as B,E as I,w as O,d as a,bD as V,bB as G,u as z,bC as H,ct as K,bE as L,k as Q,X as U,a as s,x as v,S as X,j as e,R as J,am as W,z as p,g as Y,M as Z,f as tt,cu as it,_ as et,$ as ot,r as st,e as rt}from"./index-e5ac1c37.js";import{I as c}from"./InfoCard-d1c839e9.js";import"./classnames-eea0979a.js";import"./react-e483b31d.js";import"./react-debounce-input-20b6d49d.js";import"./react-redux-7b717b6c.js";import{a as at}from"./react-query-557fee5a.js";import{bn as mt,bw as pt}from"./dayjs-75976aa4.js";import{a as nt}from"./hooks-e3579098.js";import{D as ct}from"./DataTableColumnsPicker-e6b5c621.js";import{u as lt}from"./useShowEditOption-82c19b1f.js";import{e as dt}from"./react-router-82cc6afb.js";import"./lodash-bd2b80f6.js";import"./i18next-076b76a4.js";import"./react-hot-toast-d3a0fddd.js";import"./react-qr-code-d89187e6.js";import"./react-verification-input-7fc81ee7.js";import"./axios-60492c0c.js";import"./@tinymce-7238a8f2.js";import"./collect.js-ebd014c9.js";import{u as ut}from"./react-i18next-91d47f13.js";import"./hoist-non-react-statics-2fceee1f.js";import"./@babel-e5cbf021.js";import"./react-is-e8e5dbb3.js";import"./@azure-485fd2d4.js";import"./@reduxjs-3eb15742.js";import"./immer-85efa438.js";import"./redux-fc7ec223.js";import"./reselect-26feef0e.js";import"./redux-thunk-ef899f4c.js";import"./jotai-4279821d.js";import"./react-router-dom-67fe6288.js";import"./@remix-run-dd360fb4.js";import"./styled-components-2e13d465.js";import"./tslib-b7af3ea6.js";import"./@emotion-4a2a218f.js";import"./stylis-60528643.js";import"./react-datepicker-27eb8381.js";import"./react-dom-ce3e84ee.js";import"./scheduler-765c72db.js";import"./@headlessui-220c51a1.js";import"./react-icons-071f44cd.js";import"./react-feather-90dbe0b6.js";import"./prop-types-20aec754.js";import"./@tippyjs-11b6b10a.js";import"./tippy.js-87d3e7d2.js";import"./@popperjs-0aa08b12.js";import"./formik-4b8c99cc.js";import"./deepmerge-15f827de.js";import"./lodash-es-87d1a1d5.js";import"./react-fast-compare-76c36d98.js";import"./tiny-warning-c932d744.js";import"./react-use-57961871.js";import"./react-phone-number-input-4fffe465.js";import"./uuid-4a60fe23.js";import"./react-colorful-fdedf134.js";import"./@react-oauth-6ebaa241.js";import"./react-select-0a6a834e.js";import"./@floating-ui-f24065be.js";import"./use-isomorphic-layout-effect-90624eb0.js";import"./memoize-one-297ddbcb.js";import"./@hello-pangea-bfa72c9a.js";import"./use-memo-one-4ec633fc.js";import"./css-box-model-096cf826.js";import"./tiny-invariant-bee4f299.js";import"./raf-schd-5404ed65.js";import"./array-move-3ca81c74.js";import"./antd-c1c66b30.js";import"./rc-util-6b529ca7.js";import"./@ant-design-6511c079.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./@ctrl-fb5a5473.js";import"./rc-resize-observer-f83f8b7d.js";import"./rc-motion-e4fc5c25.js";import"./rc-picker-0dcad4af.js";import"./@rc-component-79b9f5ef.js";import"./rc-pagination-2b5394e8.js";import"./rc-field-form-4872bfbf.js";import"./async-validator-dee29e8b.js";import"./pretty-bytes-5eb460d8.js";import"./react-dropzone-eadb3dbd.js";import"./file-selector-6cb2a621.js";import"./attr-accept-6df8d728.js";import"./react-string-replace-e94ae631.js";import"./currency.js-57f74176.js";import"./react-json-tree-c223e40a.js";import"./react-base16-styling-898a7ddc.js";import"./base16-823cae66.js";import"./color-65b618c9.js";import"./color-string-f5cd3c3e.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-58fb3c22.js";import"./color-convert-946e453a.js";import"./lodash.curry-52fa8793.js";import"./react-turnstile-a0253d8c.js";import"./mitt-f7ef348c.js";import"./@sentry-71948bea.js";import"./@sentry-internal-c0f5a295.js";import"./use-sync-external-store-7794fa59.js";import"./goober-70b4b9ca.js";import"./lodash.debounce-ddb7250b.js";import"./qr.js-8bf59ccc.js";import"./atoms-cf2b0802.js";mt.extend(pt);function ne(){var h,b,k,f,y,_,g;const{documentTitle:l}=M("project"),{t:i}=ut(),{id:m}=dt(),{dateFormat:T}=P(),d=B(),C=I(),j=O(),u=[{name:i("projects"),href:"/projects"},{name:i("project"),href:a("/projects/:id",{id:m})}],{data:t}=at({queryKey:["/api/v1/projects",`/api/v1/projects/${m}`],queryFn:()=>st("GET",rt(`/api/v1/projects/${m}?include=client,tasks,invoices,quotes,expenses`)).then(o=>o.data.data),staleTime:1/0}),A=nt(),$=V(),x=G(),E=z(),w=H(),F=K(),S=L(),D=lt(),n=Q(),{changeTemplateVisible:N,setChangeTemplateVisible:R,changeTemplateResources:q}=U();return t?e(v,{title:l,breadcrumbs:u,...(d("edit_project")||C(t))&&t&&{navigationTopRight:s(J,{resource:t,label:i("more_actions"),actions:A,cypressRef:"projectActionDropdown"})},children:[e("div",{className:"grid grid-cols-3 gap-4",children:[e(c,{title:t.name,children:[t&&e("div",{className:"flex space-x-20 my-3",children:[s("span",{className:"text-sm",style:{backgroundColor:n.$2,color:n.$3,colorScheme:n.$0},children:i("status")}),s(W,{entity:t})]}),s(p,{className:"block",to:a("/clients/:id",{id:t.client_id}),children:(h=t.client)==null?void 0:h.display_name}),t.due_date.length>0&&e("p",{children:[i("due_date"),": ",Y(t.due_date,T)]}),e("p",{children:[i("budgeted_hours"),": ",t.budgeted_hours]}),e("p",{children:[i("task_rate"),":",E(t.task_rate,(b=t.client)==null?void 0:b.country_id,(k=t.client)==null?void 0:k.settings.currency_id)]})]}),e(c,{title:i("notes"),className:"h-56",children:[s("p",{children:t.public_notes}),e("div",{className:"mt-3",children:[(f=t==null?void 0:t.invoices)==null?void 0:f.map((o,r)=>s("div",{children:e(p,{to:a("/invoices/:id/edit",{id:o.id}),children:[i("invoice")," #",o.number]})},r)),(y=t==null?void 0:t.quotes)==null?void 0:y.map((o,r)=>s("div",{children:e(p,{to:a("/quotes/:id/edit",{id:o.id}),children:[i("quote")," #",o.number]})},r)),(_=t==null?void 0:t.expenses)==null?void 0:_.map((o,r)=>s("div",{children:e(p,{to:a("/expenses/:id/edit",{id:o.id}),children:[i("expense")," #",o.number]})},r))]})]}),e(c,{title:i("summary"),children:[e("p",{children:[i("tasks"),": ",(g=t.tasks)==null?void 0:g.length]}),e("p",{children:[i("total_hours"),": ",t.current_hours]})]})]}),j(Z.Tasks)&&s("div",{className:"my-4",children:s(tt,{resource:"task",columns:x,customActions:$,endpoint:`/api/v1/tasks?include=status,client,project&sort=id|desc&project_tasks=${t.id}`,bulkRoute:"/api/v1/tasks/bulk",linkToCreate:`/tasks/create?project=${m}&rate=${t.task_rate}`,linkToEdit:"/tasks/:id/edit",showEdit:o=>D(o),customFilters:w,customBulkActions:S,customFilterPlaceholder:"status",withResourcefulActions:!0,leftSideChevrons:s(ct,{columns:F,defaultColumns:it,table:"task"}),linkToCreateGuards:[et("create_task")],hideEditableOptions:!d("edit_task")})}),s(ot,{entity:"project",entities:q,visible:N,setVisible:R,labelFn:o=>`${i("number")}: ${o.number}`,bulkUrl:"/api/v1/projects/bulk"})]}):s(v,{title:l,breadcrumbs:u,children:s(X,{})})}export{ne as default};
