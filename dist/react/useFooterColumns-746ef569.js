import{bp as k,j as f,F as w,a as t,a2 as u,O as m,a3 as x,p as y,Q as A,A as S,ac as j,X as N,bq as q,d as O,br as E,bs as h,aq as Q,l as F,bt as H}from"./index-e5ac1c37.js";import{u as V}from"./useDownloadPdfs-1d8bff4b.js";import{N as X,S as z,P as G,I as M,ad as J,R as K,p as L,V as U}from"./react-icons-071f44cd.js";import"./classnames-eea0979a.js";import{r as D}from"./react-e483b31d.js";import"./react-debounce-input-20b6d49d.js";import"./react-redux-7b717b6c.js";import{u as C}from"./react-i18next-91d47f13.js";import{a as W}from"./react-router-82cc6afb.js";import{u as Y}from"./useSumTableColumn-02c51a24.js";const Z=s=>{const[e]=C(),{selectedIds:c,selectedQuotes:l,setSelected:d}=s,[r,a]=D.useState(!1),p=k();return f(w,{children:[t(u,{onClick:()=>{if(!l.some(({client:v})=>v==null?void 0:v.contacts.some(({email:_})=>_),1))return A.error("client_email_not_set");a(!0)},icon:t(m,{element:X}),children:e("send_email")}),f(x,{title:e("bulk_email_quotes"),visible:r,onClose:()=>a(!1),children:[t("span",{className:"text-lg text-gray-900",children:e("are_you_sure")}),t("div",{className:"flex justify-end space-x-4 mt-5",children:t(y,{behavior:"button",onClick:()=>{p(c,"email"),d([]),a(!1)},children:t("span",{className:"text-base mx-3",children:e("yes")})})})]})]})},$=s=>{const[e]=C(),[c,l]=D.useState(!1),{selectedIds:d,setSelected:r}=s,a=k();return f(w,{children:[t(u,{onClick:()=>l(!0),icon:t(m,{element:z}),children:e("convert_to_invoice")}),f(x,{title:e("convert_to_invoice"),visible:c,onClose:()=>l(!1),children:[t("span",{className:"text-lg text-gray-900",children:e("are_you_sure")}),t("div",{className:"flex justify-end space-x-4 mt-5",children:t(y,{behavior:"button",onClick:()=>{a(d,"convert_to_invoice"),r([]),l(!1)},children:t("span",{className:"text-base mx-3",children:e("yes")})})})]})]})};function mn(){const[s]=C(),e=W(),c=S(),l=j({entity:"quote"}),d=V({entity:"quote"}),r=k(),a=Q(),p=n=>n.every(({status_id:o})=>o===h.Draft||o===h.Sent),b=n=>n.every(({status_id:o})=>o!==h.Converted),g=n=>n.every(({project_id:o})=>!o),v=n=>n.every(({status_id:o})=>o===h.Draft),_=n=>n.some(({documents:o})=>o.length),P=n=>n.flatMap(({documents:o})=>o.map(({id:i})=>i)),I=(n,o)=>{const i=P(n);a(i,"download"),o==null||o([])},{setChangeTemplateVisible:B,setChangeTemplateResources:T}=N();return[({selectedIds:n,selectedResources:o,setSelected:i})=>t(Z,{selectedIds:n,selectedQuotes:o,setSelected:i}),({selectedIds:n,setSelected:o})=>t(u,{onClick:()=>{l(n),o([])},icon:t(m,{element:G}),children:s("print_pdf")}),({selectedIds:n,setSelected:o})=>t(u,{onClick:()=>{d(n),o([])},icon:t(m,{element:M}),children:s("download_pdf")}),({selectedResources:n})=>(n==null?void 0:n.length)&&n[0].invoice_id&&t(q,{entityId:n[0].invoice_id,cacheEndpoint:"/api/v1/invoices",apiEndpoint:"/api/v1/invoices/:id?include=client.group_settings",preCheck:c("view_invoice")||c("edit_invoice"),component:t(u,{onClick:()=>e(O("/invoices/:id/edit",{id:n[0].invoice_id})),icon:t(m,{element:J}),children:s("view_invoice")})}),({selectedResources:n,setSelected:o})=>t(u,{onClick:()=>n&&_(n)?I(n,o):A.error("no_documents_to_download"),icon:t(m,{element:M}),children:s("documents")}),({selectedIds:n,selectedResources:o,setSelected:i})=>o&&v(o)&&t(u,{onClick:()=>{r(n,"sent"),i([])},icon:t(m,{element:K}),children:s("mark_sent")}),({selectedIds:n,selectedResources:o,setSelected:i})=>o&&p(o)&&t(u,{onClick:()=>{r(n,"approve"),i([])},icon:t(m,{element:L}),children:s("approve")}),({selectedIds:n,selectedResources:o,setSelected:i})=>o&&b(o)&&c("create_invoice")&&t($,{selectedIds:n,setSelected:i}),({selectedIds:n,selectedResources:o,setSelected:i})=>o&&g(o)&&c("create_project")&&t(E,{selectedIds:n,setSelected:i}),({selectedResources:n})=>t(u,{onClick:()=>{B(!0),T(n)},icon:t(m,{element:U}),children:s("run_template")})]}/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */function dn(){var r;const[s]=C(),e=F();H();const c=Y(),l=[{column:"amount",id:"amount",label:s("amount"),format:(a,p)=>c(a,p)}],d=((r=e==null?void 0:e.table_footer_columns)==null?void 0:r.quote)||[];return{footerColumns:l.filter(({id:a})=>d.includes(a)),allFooterColumns:l}}export{mn as a,dn as u};
