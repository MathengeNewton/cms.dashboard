import{a9 as B,j as v,F as Q,a3 as _,a as r,aH as k,a_ as y,e as c,p as w,aT as C,aU as P,Q as m,r as x,ao as V}from"./index-ecbcc3c7.js";import{u as F,a as W}from"./designs-863b1b5c.js";import"./react-redux-7b717b6c.js";import"./classnames-eea0979a.js";import{r as u}from"./react-e483b31d.js";import{u as j}from"./react-i18next-91d47f13.js";function H(a){var h,p;const[i]=j(),{isAdmin:D,isOwner:M}=B(),O=W(),{actionVisibility:g=!0}=a,[b,o]=u.useState(!1),[t,l]=u.useState(null),[e,f]=u.useState(null),{data:d}=F({enabled:b});u.useEffect(()=>{d&&l(d)},[d]);const S=()=>{t&&(m.processing(),f(null),x("POST",c("/api/v1/designs"),t).then(()=>{m.success("created_design"),V(["designs"]),l(null),o(!1)}).catch(s=>{var n;((n=s.response)==null?void 0:n.status)===422&&(f(s.response.data),m.dismiss())}))};return v(Q,{children:[v(_,{title:i("new_design"),visible:b,onClose:o,overflowVisible:!0,children:[r(k,{label:i("name"),onValueChange:s=>l(n=>n&&{...n,name:s}),errorMessage:e==null?void 0:e.errors.name}),r(y,{endpoint:c("/api/v1/designs?per_page=500&status=active"),onChange:s=>l(n=>s.resource&&{...s.resource,name:(n==null?void 0:n.name)||""}),inputOptions:{label:(h=a.inputLabel)==null?void 0:h.toString(),value:(t==null?void 0:t.id)||null},entryOptions:{id:"id",label:"name",value:"id"},action:{label:i("new_design"),onClick:()=>o(!0),visible:g},sortBy:"name|asc",onDismiss:()=>l(null),disableWithQueryParameter:a.disableWithQueryParameter,errorMessage:(e==null?void 0:e.errors["design.header"])||(e==null?void 0:e.errors["design.body"])||(e==null?void 0:e.errors["design.footer"])||(e==null?void 0:e.errors["design.includes"])}),r(w,{onClick:S,children:i("save")})]}),r(y,{endpoint:c("/api/v1/designs?status=active"),onChange:s=>s.resource&&a.onChange(s.resource),inputOptions:{label:(p=a.inputLabel)==null?void 0:p.toString(),value:a.value||null},entryOptions:{id:"id",label:"name",value:"id"},action:{label:i("new_design"),onClick:()=>o(!0),visible:g&&(D||M)&&(C()||P())},sortBy:"name|asc",onDismiss:a.onClearButtonClick,disableWithQueryParameter:a.disableWithQueryParameter,errorMessage:a.errorMessage,...!C()&&!P()&&{includeOnly:O,includeByLabel:!0}})]})}export{H as D};
