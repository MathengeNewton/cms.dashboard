import{a as t,a2 as C,Q as g,O as k,j as u,F as _,d7 as y,a9 as D,a3 as w,a_ as v,e as A,D as B,p as E,aq as I,v as T,A as F,bF as O,bH as S,bG as M,d8 as P,x as V,f as j,Y as G,Z as z,_ as x,d9 as H}from"./index-ecbcc3c7.js";import{D as L}from"./DataTableColumnsPicker-a8c7631c.js";import{I as N}from"./ImportButton-58c4bd54.js";import"./classnames-eea0979a.js";import{r as b}from"./react-e483b31d.js";import"./react-debounce-input-20b6d49d.js";import"./react-redux-7b717b6c.js";import{I as $,am as q}from"./react-icons-071f44cd.js";import{u as f}from"./react-i18next-91d47f13.js";import"./hoist-non-react-statics-2fceee1f.js";import"./@babel-e5cbf021.js";import"./react-is-e8e5dbb3.js";import"./lodash-bd2b80f6.js";import"./dayjs-75976aa4.js";import"./i18next-076b76a4.js";import"./axios-60492c0c.js";import"./react-hot-toast-d3a0fddd.js";import"./goober-70b4b9ca.js";import"./react-query-557fee5a.js";import"./react-dom-ce3e84ee.js";import"./scheduler-765c72db.js";import"./@azure-485fd2d4.js";import"./react-router-82cc6afb.js";import"./@remix-run-dd360fb4.js";import"./@reduxjs-3eb15742.js";import"./immer-85efa438.js";import"./redux-fc7ec223.js";import"./reselect-26feef0e.js";import"./redux-thunk-ef899f4c.js";import"./jotai-c7720f6e.js";import"./react-router-dom-67fe6288.js";import"./styled-components-2e13d465.js";import"./tslib-b7af3ea6.js";import"./@emotion-4a2a218f.js";import"./stylis-60528643.js";import"./react-datepicker-27eb8381.js";import"./@headlessui-220c51a1.js";import"./react-feather-90dbe0b6.js";import"./prop-types-20aec754.js";import"./@tippyjs-11b6b10a.js";import"./tippy.js-87d3e7d2.js";import"./@popperjs-0aa08b12.js";import"./formik-4b8c99cc.js";import"./deepmerge-15f827de.js";import"./lodash-es-87d1a1d5.js";import"./react-fast-compare-76c36d98.js";import"./tiny-warning-c932d744.js";import"./react-use-57961871.js";import"./react-phone-number-input-4fffe465.js";import"./react-verification-input-7fc81ee7.js";import"./collect.js-ebd014c9.js";import"./uuid-4a60fe23.js";import"./react-colorful-fdedf134.js";import"./@react-oauth-6ebaa241.js";import"./react-qr-code-d89187e6.js";import"./qr.js-8bf59ccc.js";import"./react-select-0a6a834e.js";import"./@floating-ui-f24065be.js";import"./use-isomorphic-layout-effect-90624eb0.js";import"./memoize-one-297ddbcb.js";import"./@hello-pangea-bfa72c9a.js";import"./use-memo-one-4ec633fc.js";import"./css-box-model-096cf826.js";import"./tiny-invariant-bee4f299.js";import"./raf-schd-5404ed65.js";import"./array-move-3ca81c74.js";import"./antd-c1c66b30.js";import"./rc-util-6b529ca7.js";import"./@ant-design-6511c079.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./@ctrl-fb5a5473.js";import"./rc-resize-observer-f83f8b7d.js";import"./rc-motion-e4fc5c25.js";import"./rc-picker-0dcad4af.js";import"./@rc-component-79b9f5ef.js";import"./rc-pagination-2b5394e8.js";import"./rc-field-form-4872bfbf.js";import"./async-validator-dee29e8b.js";import"./@tinymce-7238a8f2.js";import"./pretty-bytes-5eb460d8.js";import"./react-dropzone-eadb3dbd.js";import"./file-selector-6cb2a621.js";import"./attr-accept-6df8d728.js";import"./react-string-replace-e94ae631.js";import"./currency.js-57f74176.js";import"./react-json-tree-c223e40a.js";import"./react-base16-styling-898a7ddc.js";import"./base16-823cae66.js";import"./color-65b618c9.js";import"./color-string-f5cd3c3e.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-58fb3c22.js";import"./color-convert-946e453a.js";import"./lodash.curry-52fa8793.js";import"./react-turnstile-a0253d8c.js";import"./mitt-f7ef348c.js";import"./@sentry-71948bea.js";import"./@sentry-internal-c0f5a295.js";import"./use-sync-external-store-7794fa59.js";import"./lodash.debounce-ddb7250b.js";function Q({isVisible:r,setIsVisible:n,selectedExpenses:p,setSelected:m}){const[o]=f(),[a,s]=b.useState(""),d=y(),{isAdmin:e,isOwner:i}=D();b.useEffect(()=>()=>{s("")},[]);const l=()=>{g.processing();const c=p.map(({id:h})=>h);d(c,"bulk_categorize",{category_id:a}),m&&m([]),n(!1),s("")};return u(w,{title:`${o("change")} ${o("category")}`,visible:r,onClose:n,overflowVisible:!0,children:[u("p",{children:[o("recurring_expenses"),":"]}),t("ul",{children:p.map(({id:c,number:h})=>t("li",{children:h},c))}),t(v,{endpoint:A("/api/v1/expense_categories"),inputOptions:{value:a,label:o("category")??""},entryOptions:{id:"id",label:"name",value:"id"},sortBy:"name|asc",onChange:c=>c.resource?s(c.resource.id):null}),u("p",{children:[t("span",{className:"capitalize",children:o("manage")})," ",t(B,{className:"lowercase",to:"/settings/expense_settings",renderSpan:!e&&!i,children:o("expense_categories")})]}),t(E,{onClick:l,children:o("save")})]})}const Y=()=>{const[r]=f(),n=I(),p=e=>e.some(({documents:i})=>i.length),m=e=>e.flatMap(({documents:i})=>i.map(({id:l})=>l)),o=(e,i)=>{const l=m(e);n(l,"download"),i([])},[a,s]=b.useState(!1);return[({selectedResources:e,setSelected:i})=>t(C,{onClick:()=>p(e)?o(e,i):g.error("no_documents_to_download"),icon:t(k,{element:$}),children:r("documents")}),({selectedResources:e,setSelected:i})=>u(_,{children:[e?t(Q,{isVisible:a,setIsVisible:s,selectedExpenses:e,setSelected:i}):null,u(C,{onClick:()=>e.length?s(!0):g.error("no_expenses_selected"),icon:t(k,{element:q}),children:[r("change")," ",r("category")]})]})]};function ze(){T("expenses");const[r]=f(),n=F(),p=[{name:r("expenses"),href:"/expenses"}],m=O(),o=S(),a=M(),s=P(),d=Y();return t(V,{title:r("expenses"),breadcrumbs:p,docsLink:"en/expenses",withoutBackButton:!0,children:t(j,{resource:"expense",endpoint:"/api/v1/expenses?include=client,vendor,category&without_deleted_clients=true&without_deleted_vendors=true&sort=id|desc",columns:m,bulkRoute:"/api/v1/expenses/bulk",linkToCreate:"/expenses/create",linkToEdit:"/expenses/:id/edit",customActions:o,customFilters:a,customBulkActions:d,customFilterPlaceholder:"status",withResourcefulActions:!0,rightSide:t(G,{type:"component",guards:[z(x("create_expense"),x("edit_expense"))],component:t(N,{route:"/expenses/import"})}),leftSideChevrons:t(L,{columns:s,defaultColumns:H,table:"expense"}),linkToCreateGuards:[x("create_expense")],hideEditableOptions:!n("edit_expense")})})}export{ze as default};
