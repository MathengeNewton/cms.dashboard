import{a7 as E,j as m,F as I,a as r,G as D,o as F,p as P,dG as u}from"./index-e5ac1c37.js";import{r as g}from"./react-e483b31d.js";import"./classnames-eea0979a.js";import"./react-debounce-input-20b6d49d.js";import{a as V}from"./react-redux-7b717b6c.js";import{a as $}from"./array-move-3ca81c74.js";import{y as o}from"./lodash-bd2b80f6.js";import{D as k,C as G,P as M}from"./@hello-pangea-bfa72c9a.js";import{u as N}from"./react-i18next-91d47f13.js";import{X as R,p as T}from"./react-feather-90dbe0b6.js";function J(i){const[h]=N(),l=E(),b=V(),{disabled:d}=i,p=i.defaultVariables,[x,C]=g.useState(p);g.useEffect(()=>{var e,t;const a=((t=(e=l==null?void 0:l.settings)==null?void 0:e.pdf_variables)==null?void 0:t[i.for])??[];C(p.filter(s=>!a.includes(s.value)))},[l]);const _=a=>p.find(e=>e.value===a),y=a=>{var s,n,f,c;const e=a.target.options[a.target.selectedIndex];if(e.value==="")return;const t=o.cloneDeep(l);t.settings.pdf_variables||(o.set(t,"settings.pdf_variables",{}),(n=(s=t.settings)==null?void 0:s.pdf_variables)!=null&&n[i.for]||o.set(t,`settings.pdf_variables.${i.for}`,[])),(c=(f=t.settings.pdf_variables)==null?void 0:f[i.for])==null||c.push(e.value),b(u({object:"company",data:t})),a.target.value=""},j=a=>{var s;const e=o.cloneDeep(l),t=(s=e.settings.pdf_variables)==null?void 0:s[i.for].filter(n=>n!==a);o.set(e,`settings.pdf_variables.${i.for}`,t),b(u({object:"company",data:e}))},S=a=>{var s,n;const e=o.cloneDeep(l),t=$((s=e.settings.pdf_variables)==null?void 0:s[i.for],a.source.index,(n=a.destination)==null?void 0:n.index);o.set(e,`settings.pdf_variables.${i.for}`,t),b(u({object:"company",data:e}))};return m(I,{children:[r(D,{leftSide:h("fields"),children:m(F,{onChange:y,disabled:d,children:[r("option",{}),x.map((a,e)=>r("option",{value:a.value,children:a.label},e))]})}),r(D,{leftSide:h("variables"),children:r(k,{onDragEnd:S,children:r(G,{droppableId:i.for,isDropDisabled:d,children:a=>{var e,t,s;return m("div",{...a.droppableProps,ref:a.innerRef,children:[(s=(t=(e=l==null?void 0:l.settings)==null?void 0:e.pdf_variables)==null?void 0:t[i.for])==null?void 0:s.map((n,f)=>r(M,{draggableId:n,index:f,isDragDisabled:d,children:c=>{var v;return g.createElement("div",{...c.draggableProps,...c.dragHandleProps,ref:c.innerRef,className:"flex items-center justify-between space-y-6",key:n},m("div",{className:"flex items-center space-x-2",children:[r(P,{type:"minimal",onClick:()=>j(n),behavior:"button",disableWithoutIcon:d,disabled:d,children:r(R,{})}),r("span",{children:(v=_(n))==null?void 0:v.label})]}),r(T,{size:16}))}},n)),a.placeholder]})}})})})]})}export{J as S};
