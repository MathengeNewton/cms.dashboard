import{h as P,j as u,F as L,C as b,a as e,G as r,aH as c,aI as g,o as T,a0 as x,A as j,E as k,a9 as w,T as A,aJ as E,aK as v,as as C,aL as O,e as I,aM as U,aN as z,aO as B,z as G,ao as H}from"./index-e5ac1c37.js";import"./react-redux-7b717b6c.js";import"./classnames-eea0979a.js";import{u as V}from"./react-i18next-91d47f13.js";import{u as S}from"./jotai-4279821d.js";import"./react-e483b31d.js";import"./react-query-557fee5a.js";import"./lodash-bd2b80f6.js";import"./i18next-076b76a4.js";import"./react-hot-toast-d3a0fddd.js";import"./dayjs-75976aa4.js";import{D as J}from"./DesignSelector-512fb715.js";import{P as W}from"./ProjectSelector-c72052c6.js";import{e as K,b as Q}from"./react-router-82cc6afb.js";function ue(f){var h,p,_,m;const{t:i}=V(),{handleChange:d,errors:n}=f,l=P(),[a]=S(x);return u(L,{children:[u(b,{className:"col-span-12 lg:col-span-6 xl:col-span-4 h-max",children:[e(r,{leftSide:i("credit_date"),children:e(c,{type:"date",onValueChange:t=>d("date",t),value:(a==null?void 0:a.date)||"",errorMessage:n==null?void 0:n.errors.date})}),e(r,{leftSide:i("valid_until"),children:e(c,{type:"date",onValueChange:t=>d("due_date",t),value:(a==null?void 0:a.due_date)||"",errorMessage:n==null?void 0:n.errors.due_date})}),e(r,{leftSide:i("partial"),children:e(c,{id:"partial",type:"number",changeOverride:!0,onValueChange:t=>d("partial",parseFloat(t)),value:(a==null?void 0:a.partial)||"",errorMessage:n==null?void 0:n.errors.partial})}),a&&a.partial>0&&e(r,{leftSide:i("partial_due_date"),children:e(c,{type:"date",onValueChange:t=>d("partial_due_date",t),value:(a==null?void 0:a.partial_due_date)||"",errorMessage:n==null?void 0:n.errors.partial_due_date})}),a&&((h=l==null?void 0:l.custom_fields)==null?void 0:h.invoice1)&&e(g,{field:"credit1",defaultValue:(a==null?void 0:a.custom_value1)||"",value:l.custom_fields.invoice1,onValueChange:t=>d("custom_value1",String(t))}),a&&((p=l==null?void 0:l.custom_fields)==null?void 0:p.invoice2)&&e(g,{field:"credit2",defaultValue:(a==null?void 0:a.custom_value2)||"",value:l.custom_fields.invoice2,onValueChange:t=>d("custom_value2",String(t))})]}),u(b,{className:"col-span-12 lg:col-span-6 xl:col-span-4 h-max",children:[e(r,{leftSide:i("credit_number"),children:e(c,{id:"number",onValueChange:t=>d("number",t),value:(a==null?void 0:a.number)||"",errorMessage:n==null?void 0:n.errors.number})}),e(r,{leftSide:i("po_number_short"),children:e(c,{id:"po_number",onValueChange:t=>d("po_number",t),value:(a==null?void 0:a.po_number)||"",errorMessage:n==null?void 0:n.errors.po_number})}),e(r,{leftSide:i("discount"),children:u("div",{className:"flex space-x-2",children:[e("div",{className:"w-full lg:w-1/2",children:e(c,{type:"number",onValueChange:t=>d("discount",parseFloat(t)),value:(a==null?void 0:a.discount)||"",errorMessage:n==null?void 0:n.errors.discount})}),e("div",{className:"w-full lg:w-1/2",children:u(T,{onValueChange:t=>d("is_amount_discount",JSON.parse(t)),value:a==null?void 0:a.is_amount_discount.toString(),errorMessage:n==null?void 0:n.errors.is_amount_discount,children:[e("option",{value:"false",children:i("percent")}),e("option",{value:"true",children:i("amount")})]})})]})}),a&&((_=l==null?void 0:l.custom_fields)==null?void 0:_.invoice3)&&e(g,{field:"credit3",defaultValue:(a==null?void 0:a.custom_value3)||"",value:l.custom_fields.invoice3,onValueChange:t=>d("custom_value3",String(t))}),a&&((m=l==null?void 0:l.custom_fields)==null?void 0:m.invoice4)&&e(g,{field:"credit4",defaultValue:(a==null?void 0:a.custom_value4)||"",value:l.custom_fields.invoice4,onValueChange:t=>d("custom_value4",String(t))})]})]})}function de(f){const{t:i}=V(),{id:d}=K(),{handleChange:n,errors:l,isDefaultTerms:a,isDefaultFooter:h,setIsDefaultFooter:p,setIsDefaultTerms:_}=f,m=j(),t=k(),{isAdmin:M,isOwner:y}=w(),D=Q(),[s]=S(x),N=()=>{H(["credits"])},F=[i("terms"),i("footer"),i("public_notes"),i("private_notes"),i("documents"),i("settings"),...M||y?[i("custom_fields")]:[]];return e(b,{className:"col-span-12 xl:col-span-8 h-max px-6",children:u(A,{tabs:F,formatTabLabel:o=>{if(o===4)return e(E,{numberOfDocuments:s==null?void 0:s.documents.length})},withoutVerticalMargin:!0,children:[u("div",{children:[e(v,{value:(s==null?void 0:s.terms)||"",onChange:o=>n("terms",o)}),e(r,{className:"mt-4",leftSide:e(C,{checked:a,onValueChange:o=>_(o)}),noExternalPadding:!0,noVerticalPadding:!0,children:e("span",{className:"font-medium",children:i("save_as_default_terms")})})]}),u("div",{children:[e(v,{value:(s==null?void 0:s.footer)||"",onChange:o=>n("footer",o)}),e(r,{className:"mt-4",leftSide:e(C,{checked:h,onValueChange:o=>p(o)}),noExternalPadding:!0,noVerticalPadding:!0,children:e("span",{className:"font-medium",children:i("save_as_default_footer")})})]}),e("div",{className:"mb-4",children:e(v,{value:(s==null?void 0:s.public_notes)||"",onChange:o=>n("public_notes",o)})}),e("div",{className:"mb-4",children:e(v,{value:(s==null?void 0:s.private_notes)||"",onChange:o=>n("private_notes",o)})}),D.pathname.endsWith("/create")?u("div",{className:"text-sm mt-4",children:[i("save_to_upload_documents"),"."]}):u("div",{className:"my-4",children:[e(O,{widgetOnly:!0,endpoint:I("/api/v1/credits/:id/upload",{id:d}),onSuccess:N,disableUpload:!m("edit_credit")&&!t(s)}),e(U,{documents:(s==null?void 0:s.documents)||[],onDocumentDelete:N,disableEditableOptions:!t(s,!0)})]}),e("div",{className:"my-4",children:u("div",{className:"grid grid-cols-12 gap-4",children:[u("div",{className:"col-span-12 lg:col-span-6 space-y-6",children:[e("div",{className:"space-y-2",children:e(z,{inputLabel:i("user"),value:s==null?void 0:s.assigned_user_id,onChange:o=>n("assigned_user_id",o.id),errorMessage:l==null?void 0:l.errors.assigned_user_id,readonly:!m("edit_credit")})}),e("div",{className:"space-y-2",children:e(B,{inputLabel:i("vendor"),value:s==null?void 0:s.vendor_id,onChange:o=>n("vendor_id",o.id),onClearButtonClick:()=>n("vendor_id",""),errorMessage:l==null?void 0:l.errors.vendor_id})}),e("div",{className:"space-y-2",children:e(J,{inputLabel:i("design"),value:s==null?void 0:s.design_id,onChange:o=>n("design_id",o.id),onClearButtonClick:()=>n("design_id",""),disableWithQueryParameter:!0,errorMessage:l==null?void 0:l.errors.design_id})})]}),u("div",{className:"col-span-12 lg:col-span-6 space-y-6",children:[e("div",{className:"space-y-2",children:e(W,{inputLabel:i("project"),value:s==null?void 0:s.project_id,onChange:o=>n("project_id",o.id),errorMessage:l==null?void 0:l.errors.project_id})}),e("div",{className:"space-y-2",children:e(c,{label:i("exchange_rate"),type:"number",value:(s==null?void 0:s.exchange_rate)||1,onValueChange:o=>n("exchange_rate",parseFloat(o)),errorMessage:l==null?void 0:l.errors.exchange_rate})}),e("div",{className:"pt-9",children:e(C,{label:i("inclusive_taxes"),checked:(s==null?void 0:s.uses_inclusive_taxes)||!1,onChange:o=>n("uses_inclusive_taxes",o)})})]})]})}),u("div",{className:"my-4",children:[u("span",{className:"text-sm",children:[i("custom_fields")," Â "]}),e(G,{to:"/settings/custom_fields/invoices",className:"capitalize",children:i("click_here")})]})]})})}export{ue as C,de as a};
