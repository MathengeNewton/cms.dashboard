import{ai as S,b as M,c as N,u as E,l as L,aP as k,ak as A,a as o,D as _,d as f,U as x,g as b,bu as B,bv as H,am as O}from"./index-e5ac1c37.js";import{P as R}from"./PaymentStatus-4a5a4ead.js";import{u as U}from"./react-i18next-91d47f13.js";const V=["status","number","client","amount","invoice_number","date","type","transaction_reference"];function j(){const[n,s,d,c]=S({entity:"payment"});return["status","number","client","amount","invoice_number","date","type","transaction_reference","archived_at","converted_amount","created_at",n,s,d,c,"entity_state","exchange_rate","is_deleted","private_notes","refunded","applied","credits","updated_at"]}function q(){var v;const{t:n}=U(),{dateFormat:s}=M(),d=N();j();const c=E(),u=L(),F=k(),m=A(),T=e=>{var t;if(e.exchange_rate)return e.amount*e.exchange_rate;if(e.client&&((t=e.client.settings.currency_id)==null?void 0:t.length)>1){const a=F(e.currency_id);if(a)return e.amount*a.exchange_rate}return e.amount},[y,h,g,C]=S({entity:"payment"}),P=[{column:"status",id:"status_id",label:n("status"),format:(e,t)=>o(R,{entity:t})},{column:"number",id:"number",label:n("number"),format:(e,t)=>o(_,{to:f("/payments/:id/edit",{id:t.id}),renderSpan:d("payment",t),children:t.number})},{column:"client",id:"client_id",label:n("client"),format:(e,t)=>{var a;return o(_,{to:f("/clients/:id",{id:t.client_id}),renderSpan:d("client",t.client),children:(a=t.client)==null?void 0:a.display_name})}},{column:"amount",id:"amount",label:n("amount"),format:(e,t)=>{var a,i;return c(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"invoice_number",id:"id",label:n("invoice_number"),format:(e,t)=>{var a,i,l;return o(x,{placement:"top",tooltipElement:o("div",{className:"flex space-x-2",children:(a=t.invoices)==null?void 0:a.map(r=>o(_,{to:f("/invoices/:id/edit",{id:r.id}),renderSpan:d("invoice",r),children:r.number},r.id))}),width:"auto",disabled:(((i=t.invoices)==null?void 0:i.length)??0)<4,children:o("div",{className:"flex space-x-2",children:(l=t.invoices)==null?void 0:l.map((r,D)=>D<3&&o(_,{to:f("/invoices/:id/edit",{id:r.id}),renderSpan:d("invoice",r),children:r.number},r.id))})})}},{column:"date",id:"date",label:n("date"),format:e=>b(e,s)},{column:"type",id:"type_id",label:n("type"),format:e=>o(B,{for:H,code:e,headless:!0})},{column:"transaction_reference",id:"transaction_reference",label:n("transaction_reference")},{column:"archived_at",id:"archived_at",label:n("archived_at"),format:e=>b(e,s)},{column:"converted_amount",id:"converted_amount",label:n("converted_amount"),format:(e,t)=>{var a,i;return c(T(t),(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"created_at",id:"created_at",label:n("created_at"),format:e=>b(e,s)},{column:y,id:"custom_value1",label:y,format:e=>m("payment1",e==null?void 0:e.toString())},{column:h,id:"custom_value2",label:h,format:e=>m("payment2",e==null?void 0:e.toString())},{column:g,id:"custom_value3",label:g,format:e=>m("payment3",e==null?void 0:e.toString())},{column:C,id:"custom_value4",label:C,format:e=>m("payment4",e==null?void 0:e.toString())},{column:"entity_state",id:"id",label:n("entity_state"),format:(e,t)=>o(O,{entity:t})},{column:"exchange_rate",id:"exchange_rate",label:n("exchange_rate")},{column:"is_deleted",id:"is_deleted",label:n("is_deleted"),format:(e,t)=>t.is_deleted?n("yes"):n("no")},{column:"private_notes",id:"private_notes",label:n("private_notes"),format:e=>o(x,{size:"regular",truncate:!0,containsUnsafeHTMLTags:!0,message:e,children:o("span",{dangerouslySetInnerHTML:{__html:e}})})},{column:"refunded",id:"refunded",label:n("refunded"),format:(e,t)=>{var a,i;return c(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"applied",id:"applied",label:n("applied"),format:(e,t)=>{var a,i;return c(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"credits",id:"credits",label:n("credits"),format:(e,t)=>{var a,i;return c(t.paymentables.filter(l=>l.credit_id!=null).reduce((l,r)=>l+r.amount,0),(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"updated_at",id:"updated_at",label:n("updated_at"),format:e=>b(e,s)}],p=((v=u==null?void 0:u.react_table_columns)==null?void 0:v.payment)||V;return P.filter(e=>p.includes(e.column)).sort((e,t)=>p.indexOf(e.column)-p.indexOf(t.column))}export{j as a,V as d,q as u};
