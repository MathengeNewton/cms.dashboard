import{l as _,b as P,a as i,z as A,g as O,bO as E,j as T,F as k,a2 as p,O as u,bP as x,Q as c,r as y,e as w,ao as b,H as F,bQ as q,bR as S,A as B,f as M,d as I}from"./index-e5ac1c37.js";import"./classnames-eea0979a.js";import{r as D}from"./react-e483b31d.js";import"./react-debounce-input-20b6d49d.js";import"./react-redux-7b717b6c.js";import{u as h}from"./react-i18next-91d47f13.js";import{u as K}from"./react-query-557fee5a.js";import{t as L,ah as z,G as R,E as Q,I as g}from"./react-icons-071f44cd.js";import{c as j}from"./jotai-4279821d.js";import{D as H}from"./DataTableColumnsPicker-e6b5c621.js";import{e as G,g as U}from"./react-router-82cc6afb.js";import"./hoist-non-react-statics-2fceee1f.js";import"./@babel-e5cbf021.js";import"./react-is-e8e5dbb3.js";import"./lodash-bd2b80f6.js";import"./dayjs-75976aa4.js";import"./i18next-076b76a4.js";import"./axios-60492c0c.js";import"./react-hot-toast-d3a0fddd.js";import"./goober-70b4b9ca.js";import"./@azure-485fd2d4.js";import"./@reduxjs-3eb15742.js";import"./immer-85efa438.js";import"./redux-fc7ec223.js";import"./reselect-26feef0e.js";import"./redux-thunk-ef899f4c.js";import"./react-router-dom-67fe6288.js";import"./@remix-run-dd360fb4.js";import"./styled-components-2e13d465.js";import"./tslib-b7af3ea6.js";import"./@emotion-4a2a218f.js";import"./stylis-60528643.js";import"./react-datepicker-27eb8381.js";import"./react-dom-ce3e84ee.js";import"./scheduler-765c72db.js";import"./@headlessui-220c51a1.js";import"./react-feather-90dbe0b6.js";import"./prop-types-20aec754.js";import"./@tippyjs-11b6b10a.js";import"./tippy.js-87d3e7d2.js";import"./@popperjs-0aa08b12.js";import"./formik-4b8c99cc.js";import"./deepmerge-15f827de.js";import"./lodash-es-87d1a1d5.js";import"./react-fast-compare-76c36d98.js";import"./tiny-warning-c932d744.js";import"./react-use-57961871.js";import"./react-phone-number-input-4fffe465.js";import"./react-verification-input-7fc81ee7.js";import"./collect.js-ebd014c9.js";import"./uuid-4a60fe23.js";import"./react-colorful-fdedf134.js";import"./@react-oauth-6ebaa241.js";import"./react-qr-code-d89187e6.js";import"./qr.js-8bf59ccc.js";import"./react-select-0a6a834e.js";import"./@floating-ui-f24065be.js";import"./use-isomorphic-layout-effect-90624eb0.js";import"./memoize-one-297ddbcb.js";import"./@hello-pangea-bfa72c9a.js";import"./use-memo-one-4ec633fc.js";import"./css-box-model-096cf826.js";import"./tiny-invariant-bee4f299.js";import"./raf-schd-5404ed65.js";import"./array-move-3ca81c74.js";import"./antd-c1c66b30.js";import"./rc-util-6b529ca7.js";import"./@ant-design-6511c079.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./@ctrl-fb5a5473.js";import"./rc-resize-observer-f83f8b7d.js";import"./rc-motion-e4fc5c25.js";import"./rc-picker-0dcad4af.js";import"./@rc-component-79b9f5ef.js";import"./rc-pagination-2b5394e8.js";import"./rc-field-form-4872bfbf.js";import"./async-validator-dee29e8b.js";import"./@tinymce-7238a8f2.js";import"./pretty-bytes-5eb460d8.js";import"./react-dropzone-eadb3dbd.js";import"./file-selector-6cb2a621.js";import"./attr-accept-6df8d728.js";import"./react-string-replace-e94ae631.js";import"./currency.js-57f74176.js";import"./react-json-tree-c223e40a.js";import"./react-base16-styling-898a7ddc.js";import"./base16-823cae66.js";import"./color-65b618c9.js";import"./color-string-f5cd3c3e.js";import"./color-name-b7949e8c.js";import"./simple-swizzle-58fb3c22.js";import"./color-convert-946e453a.js";import"./lodash.curry-52fa8793.js";import"./react-turnstile-a0253d8c.js";import"./mitt-f7ef348c.js";import"./@sentry-71948bea.js";import"./@sentry-internal-c0f5a295.js";import"./use-sync-external-store-7794fa59.js";import"./lodash.debounce-ddb7250b.js";const v=["name","linked_to","size","width","height","private","created_at"];function V(){return["name","linked_to","size","width","height","private","created_at","hash","id","type"]}function $(){var e;const[t]=h(),r=_(),{dateFormat:a}=P(),n=[{column:"name",id:"name",label:t("name")},{column:"linked_to",id:"link",label:t("linked_to"),format:o=>{if(o){const s=o.split("/")[1];return i(A,{to:o,children:t(s.slice(0,-1))})}}},{column:"size",id:"size",label:t("size"),format:o=>`${o} KB`},{column:"width",id:"width",label:t("width")},{column:"height",id:"height",label:t("height")},{column:"private",id:"is_public",label:t("private"),format:o=>t(o?"no":"yes")},{column:"created_at",id:"created_at",label:t("created_at"),format:o=>O(o,a)},{column:"hash",id:"hash",label:t("hash")},{column:"type",id:"type",label:t("type")}],m=((e=r==null?void 0:r.react_table_columns)==null?void 0:e.clientDocument)||v;return n.filter(o=>m.includes(o.column)).sort((o,s)=>m.indexOf(o.column)-m.indexOf(s.column))}/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */function X(){const[t]=h();return[{label:t("all"),value:"all",color:"black",backgroundColor:"#e4e4e4",queryKey:"type"},{label:t("public"),value:"public",color:"white",backgroundColor:"#6B7280",queryKey:"type"},{label:t("private"),value:"private",color:"white",backgroundColor:"#93C5FD",queryKey:"type"},{label:t("image"),value:"image",color:"white",backgroundColor:"#1D4ED8",queryKey:"type"},{label:t("pdf"),value:"pdf",color:"white",backgroundColor:"#22C55E",queryKey:"type"},{label:t("other"),value:"other",color:"white",backgroundColor:"#9CA3AF",queryKey:"type"}]}function J(t){const[r]=h(),{document:a}=t,n=j(E),[m,e]=D.useState(""),[o,s]=D.useState(!1),d=f=>{c.processing(),y("DELETE",w("/api/v1/documents/:id",{id:m}),{},{headers:{"X-Api-Password":f}}).then(()=>{c.success("deleted_document"),b(["clients"])}).catch(l=>{var C;((C=l.response)==null?void 0:C.status)===412&&(c.error("password_error_incorrect"),n(0))})};return T(k,{children:[i(p,{onClick:()=>{e(a.id),s(!0)},icon:i(u,{element:L}),children:r("delete")}),i(x,{show:o,onClose:s,onSave:d})]})}function N(){const[t]=h(),r=K(),a=q(),n=(e,o)=>{c.processing(),r.fetchQuery(["/api/v1/documents",e.hash],()=>y("GET",w("/documents/:hash",{hash:e.hash}),{headers:S()},{responseType:"arraybuffer"}),{staleTime:1/0}).then(s=>{const d=new Blob([s.data],{type:s.headers["content-type"]}),f=URL.createObjectURL(d);if(o){window.open(f);return}const l=document.createElement("a");l.download=e.name,l.href=f,l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l),c.dismiss()})};return[e=>i(p,{onClick:()=>n(e,!0),icon:i(u,{element:z}),children:t("view")}),e=>!!e.is_public&&i(p,{onClick:()=>a(e.id,!1).then(()=>b(["clients"])),icon:i(u,{element:R}),children:t("set_private")}),e=>!e.is_public&&i(p,{onClick:()=>a(e.id,!0).then(()=>b(["clients"])),icon:i(u,{element:Q}),children:t("set_public")}),e=>i(p,{onClick:()=>n(e,!1),icon:i(u,{element:g}),children:t("download")}),()=>i(F,{withoutPadding:!0}),e=>i(J,{document:e})]}function W(){const[t]=h(),r=n=>{c.processing(),y("POST",w("/api/v1/documents/bulk?per_page=100"),{action:"download",ids:n}).then(()=>c.success("exported_data"))};return[({selectedResources:n,setSelected:m})=>i(p,{onClick:()=>{r(n.map(({id:e})=>e)),m([])},icon:i(u,{element:g}),children:t("download")})]}function He(){const{id:t}=G(),r=U(),{isPurgeOrMergeActionCalled:a}=r,n=B(),m=X(),e=$(),o=N(),s=V(),d=W();return i(k,{children:i(M,{resource:"document",methodType:"POST",queryIdentificator:"/api/v1/documents",endpoint:I("/api/v1/clients/:id/documents",{id:t}),columns:e,customFilters:m,customActions:o,customBulkActions:d,customFilterPlaceholder:"type",withResourcefulActions:!0,leftSideChevrons:i(H,{table:"clientDocument",columns:s,defaultColumns:v}),showEdit:()=>!1,showRestore:()=>!1,showArchive:()=>!1,showDelete:()=>!1,disableQuery:a,withoutDefaultBulkActions:!0,withoutStatusFilter:!0,hideEditableOptions:!n("edit_expense")})})}export{He as default};
