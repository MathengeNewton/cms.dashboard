import{h as P,j as r,F as L,C,a,G as o,aH as u,aI as g,o as T,a4 as x,A as j,E as k,a9 as w,T as A,aJ as E,aK as v,as as b,aL as O,e as I,aM as Q,aN as U,aO as z,z as B,ao as G}from"./index-ecbcc3c7.js";import"./react-redux-7b717b6c.js";import"./classnames-eea0979a.js";import{u as V}from"./react-i18next-91d47f13.js";import{u as S}from"./jotai-c7720f6e.js";import"./react-e483b31d.js";import{D as H}from"./DesignSelector-1def70e7.js";import{P as J}from"./ProjectSelector-0c0e158e.js";import"./react-query-557fee5a.js";import"./lodash-bd2b80f6.js";import"./i18next-076b76a4.js";import"./react-hot-toast-d3a0fddd.js";import"./dayjs-75976aa4.js";import{e as W,b as K}from"./react-router-82cc6afb.js";function re(f){var h,_,p,m;const{t:i}=V(),{handleChange:c,errors:n}=f,[e]=S(x),d=P();return r(L,{children:[r(C,{className:"col-span-12 lg:col-span-6 xl:col-span-4 h-max",children:[a(o,{leftSide:i("quote_date"),children:a(u,{type:"date",onValueChange:l=>c("date",l),value:(e==null?void 0:e.date)||"",errorMessage:n==null?void 0:n.errors.date})}),a(o,{leftSide:i("valid_until"),children:a(u,{type:"date",onValueChange:l=>c("due_date",l),value:(e==null?void 0:e.due_date)||"",errorMessage:n==null?void 0:n.errors.due_date})}),a(o,{leftSide:i("partial"),children:a(u,{id:"partial",type:"number",changeOverride:!0,onValueChange:l=>c("partial",parseFloat(l)),value:(e==null?void 0:e.partial)||"",errorMessage:n==null?void 0:n.errors.partial})}),e&&e.partial>0&&a(o,{leftSide:i("partial_due_date"),children:a(u,{type:"date",onValueChange:l=>c("partial_due_date",l),value:(e==null?void 0:e.partial_due_date)||"",errorMessage:n==null?void 0:n.errors.partial_due_date})}),e&&((h=d==null?void 0:d.custom_fields)==null?void 0:h.invoice1)&&a(g,{field:"quote1",defaultValue:(e==null?void 0:e.custom_value1)||"",value:d.custom_fields.invoice1,onValueChange:l=>c("custom_value1",String(l))}),e&&((_=d==null?void 0:d.custom_fields)==null?void 0:_.invoice2)&&a(g,{field:"quote2",defaultValue:(e==null?void 0:e.custom_value2)||"",value:d.custom_fields.invoice2,onValueChange:l=>c("custom_value2",String(l))})]}),r(C,{className:"col-span-12 lg:col-span-6 xl:col-span-4 h-max",children:[a(o,{leftSide:i("quote_number_short"),children:a(u,{id:"number",onValueChange:l=>c("number",l),value:(e==null?void 0:e.number)||"",errorMessage:n==null?void 0:n.errors.number})}),a(o,{leftSide:i("po_number_short"),children:a(u,{id:"po_number",onValueChange:l=>c("po_number",l),value:(e==null?void 0:e.po_number)||"",errorMessage:n==null?void 0:n.errors.po_number})}),a(o,{leftSide:i("discount"),children:r("div",{className:"flex space-x-2",children:[a("div",{className:"w-full lg:w-1/2",children:a(u,{type:"number",onValueChange:l=>c("discount",parseFloat(l)),value:(e==null?void 0:e.discount)||"",errorMessage:n==null?void 0:n.errors.discount})}),a("div",{className:"w-full lg:w-1/2",children:r(T,{onValueChange:l=>c("is_amount_discount",JSON.parse(l)),value:e==null?void 0:e.is_amount_discount.toString(),errorMessage:n==null?void 0:n.errors.is_amount_discount,children:[a("option",{value:"false",children:i("percent")}),a("option",{value:"true",children:i("amount")})]})})]})}),e&&((p=d==null?void 0:d.custom_fields)==null?void 0:p.invoice3)&&a(g,{field:"quote3",defaultValue:(e==null?void 0:e.custom_value3)||"",value:d.custom_fields.invoice3,onValueChange:l=>c("custom_value3",String(l))}),e&&((m=d==null?void 0:d.custom_fields)==null?void 0:m.invoice4)&&a(g,{field:"quote4",defaultValue:(e==null?void 0:e.custom_value4)||"",value:d.custom_fields.invoice4,onValueChange:l=>c("custom_value4",String(l))})]})]})}function ce(f){const{t:i}=V(),{id:c}=W(),{handleChange:n,errors:e,isDefaultTerms:d,isDefaultFooter:h,setIsDefaultFooter:_,setIsDefaultTerms:p}=f,m=j(),l=k(),{isAdmin:M,isOwner:y}=w(),D=K(),[s]=S(x),F=[i("terms"),i("footer"),i("public_notes"),i("private_notes"),i("documents"),i("settings"),...M||y?[i("custom_fields")]:[]],N=()=>{G(["quotes"])};return a(C,{className:"col-span-12 xl:col-span-8 h-max px-6",children:r(A,{tabs:F,formatTabLabel:t=>{if(t===4)return a(E,{numberOfDocuments:s==null?void 0:s.documents.length})},withoutVerticalMargin:!0,children:[r("div",{children:[a(v,{value:(s==null?void 0:s.terms)||"",onChange:t=>n("terms",t)}),a(o,{className:"mt-4",leftSide:a(b,{checked:d,onValueChange:t=>p(t)}),noExternalPadding:!0,noVerticalPadding:!0,children:a("span",{className:"font-medium",children:i("save_as_default_terms")})})]}),r("div",{children:[a(v,{value:(s==null?void 0:s.footer)||"",onChange:t=>n("footer",t)}),a(o,{className:"mt-4",leftSide:a(b,{checked:h,onValueChange:t=>_(t)}),noExternalPadding:!0,noVerticalPadding:!0,children:a("span",{className:"font-medium",children:i("save_as_default_footer")})})]}),a("div",{className:"mb-4",children:a(v,{value:(s==null?void 0:s.public_notes)||"",onChange:t=>n("public_notes",t)})}),a("div",{className:"mb-4",children:a(v,{value:(s==null?void 0:s.private_notes)||"",onChange:t=>n("private_notes",t)})}),D.pathname.endsWith("/create")?r("div",{className:"text-sm mt-4",children:[i("save_to_upload_documents"),"."]}):r("div",{className:"my-4",children:[a(O,{widgetOnly:!0,endpoint:I("/api/v1/quotes/:id/upload",{id:c}),onSuccess:N,disableUpload:!m("edit_quote")&&!l(s)}),a(Q,{documents:(s==null?void 0:s.documents)||[],onDocumentDelete:N,disableEditableOptions:!l(s,!0)})]}),a("div",{className:"my-4",children:r("div",{className:"grid grid-cols-12 gap-4",children:[r("div",{className:"col-span-12 lg:col-span-6 space-y-6",children:[a("div",{className:"space-y-2",children:a(U,{inputLabel:i("user"),value:s==null?void 0:s.assigned_user_id,onChange:t=>n("assigned_user_id",t.id),errorMessage:e==null?void 0:e.errors.assigned_user_id,readonly:!m("edit_quote")})}),a("div",{className:"space-y-2",children:a(z,{inputLabel:i("vendor"),value:s==null?void 0:s.vendor_id,onChange:t=>n("vendor_id",t.id),onClearButtonClick:()=>n("vendor_id",""),errorMessage:e==null?void 0:e.errors.vendor_id})}),a("div",{className:"space-y-2",children:a(H,{inputLabel:i("design"),value:s==null?void 0:s.design_id,onChange:t=>n("design_id",t.id),onClearButtonClick:()=>n("design_id",""),disableWithQueryParameter:!0,errorMessage:e==null?void 0:e.errors.design_id})})]}),r("div",{className:"col-span-12 lg:col-span-6 space-y-6",children:[a("div",{className:"space-y-2",children:a(J,{inputLabel:i("project"),value:s==null?void 0:s.project_id,onChange:t=>n("project_id",t.id),errorMessage:e==null?void 0:e.errors.project_id})}),a("div",{className:"space-y-2",children:a(u,{label:i("exchange_rate"),type:"number",value:(s==null?void 0:s.exchange_rate)||1,onValueChange:t=>n("exchange_rate",parseFloat(t)),errorMessage:e==null?void 0:e.errors.exchange_rate})}),a("div",{className:"pt-9",children:a(b,{label:i("inclusive_taxes"),checked:(s==null?void 0:s.uses_inclusive_taxes)||!1,onChange:t=>n("uses_inclusive_taxes",t)})})]})]})}),r("div",{className:"my-4",children:[r("span",{className:"text-sm",children:[i("custom_fields")," Â "]}),a(B,{to:"/settings/custom_fields/invoices",className:"capitalize",children:i("click_here")})]})]})})}export{re as Q,ce as a};
