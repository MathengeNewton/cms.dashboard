import{Q as s,r as g,j as u,a as n,F as k,S as L}from"./index-ecbcc3c7.js";import{r as i}from"./react-e483b31d.js";import{u as b}from"./react-query-557fee5a.js";const c=!!navigator.userAgent.match(/Android/i);function j(e){const o=b(),{renderAsHTML:d}=e,r=i.useRef(null),a=i.useRef(null),[l,f]=i.useState(!1);return i.useEffect(()=>(e.withToast&&s.processing(),f(!0),e.enabled!==!1&&o.fetchQuery({queryKey:[e.link,JSON.stringify(e.resource)],queryFn:({signal:h})=>g(e.method,e.link,e.resource,{responseType:"arraybuffer",signal:h}).then(m=>{const y=new Blob([m.data],{type:d?"text/html":"application/pdf"}),t=URL.createObjectURL(y);c&&r.current&&(r.current.href=t,e.onLink&&e.onLink(t)),!c&&a.current&&(a.current.src=t,e.onLink&&e.onLink(t)),s.dismiss()}).finally(()=>f(!1))}),()=>{s.dismiss()}),[e.link,e.resource,e.enabled]),c?u("p",{children:["Unable to preview PDF. Â ",n("a",{ref:r,style:{textDecoration:"underline"},children:"Click to download it."})]}):u(k,{children:[l&&n("div",{className:"flex justify-center items-center",style:{height:e.height||1500},children:n(L,{})}),n("iframe",{ref:a,width:"100%",height:l?0:e.height||1500})]})}export{j as I,c as a};
