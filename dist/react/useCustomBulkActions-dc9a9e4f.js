import{d1 as _,j as p,F as b,a as t,a2 as a,O as i,a3 as A,p as P,c as S,ac as B,X as I,d as N,Q as T,d2 as h,aq as E}from"./index-e5ac1c37.js";import{u as O}from"./useDownloadPdfs-1d8bff4b.js";import{N as j,R as F,P as V,I as k,ad as $,S as q,T as Q,V as X}from"./react-icons-071f44cd.js";import"./classnames-eea0979a.js";import{r as z}from"./react-e483b31d.js";import"./react-debounce-input-20b6d49d.js";import"./react-redux-7b717b6c.js";import{u as f}from"./react-i18next-91d47f13.js";import{a as G}from"./react-router-82cc6afb.js";const H=o=>{const[l]=f(),[c,r]=z.useState(!1),{selectedIds:d,setSelected:m}=o,u=_();return p(b,{children:[t(a,{onClick:()=>r(!0),icon:t(i,{element:j}),children:l("send_email")}),p(A,{title:l("bulk_email_purchase_orders"),visible:c,onClose:()=>r(!1),children:[t("span",{className:"text-lg text-gray-900",children:l("are_you_sure")}),t("div",{className:"flex justify-end space-x-4 mt-5",children:t(P,{behavior:"button",onClick:()=>{u(d,"email"),m([]),r(!1)},children:t("span",{className:"text-base mx-3",children:l("yes")})})})]})]})};function te(){const[o]=f(),l=G(),c=S(),r=_(),d=E(),m=B({entity:"purchase_order"}),u=O({entity:"purchase_order"}),x=e=>e.some(({documents:n})=>n.length),v=e=>e.flatMap(({documents:n})=>n.map(({id:s})=>s)),C=(e,n)=>{const s=v(e);d(s,"download"),n([])},g=e=>e.every(({status_id:n})=>n===h.Draft),w=e=>e.every(({expense_id:n})=>!n),M=e=>e.every(({status_id:n})=>n===h.Accepted),{setChangeTemplateVisible:y,setChangeTemplateResources:D}=I();return[({selectedIds:e,setSelected:n})=>t(H,{selectedIds:e,setSelected:n}),({selectedIds:e,selectedResources:n,setSelected:s})=>g(n)&&t(a,{onClick:()=>{r(e,"mark_sent"),s([])},icon:t(i,{element:F}),children:o("mark_sent")}),({selectedIds:e,setSelected:n})=>t(a,{onClick:()=>{m(e),n([])},icon:t(i,{element:V}),children:o("print_pdf")}),({selectedIds:e,setSelected:n})=>t(a,{onClick:()=>{u(e),n([])},icon:t(i,{element:k}),children:o("download_pdf")}),({selectedResources:e})=>(e==null?void 0:e.length)&&e[0].expense_id&&!c("expense",e[0].expense)&&t(a,{onClick:()=>l(N("/expenses/:id/edit",{id:e[0].expense_id})),icon:t(i,{element:$}),children:`${o("view")} ${o("expense")}`}),({selectedIds:e,selectedResources:n,setSelected:s})=>n&&w(n)&&t(a,{onClick:()=>{r(e,"expense"),s([])},icon:t(i,{element:q}),children:o("convert_to_expense")}),({selectedIds:e,selectedResources:n,setSelected:s})=>M(n)&&t(a,{onClick:()=>{r(e,"add_to_inventory"),s([])},icon:t(i,{element:Q}),children:o("add_to_inventory")}),({selectedResources:e,setSelected:n})=>t(a,{onClick:()=>x(e)?C(e,n):T.error("no_documents_to_download"),icon:t(i,{element:k}),children:o("documents")}),({selectedResources:e})=>t(a,{onClick:()=>{y(!0),D(e)},icon:t(i,{element:X}),children:o("run_template")})]}export{te as u};
